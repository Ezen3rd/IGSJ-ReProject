<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappers.adminMapper">
	<!-- 
		userId
		userPwd
		userName
		userPhoneNumber
		userEmail
		userJoinDate
		userVerify
		userBirth
	 -->
	<!-- 관리자 : 전체 회원 불러오기 -->
	<select id="getAllUsers" parameterType="hashMap" resultType="ezen.project.IGSJ.member.domain.MemberDTO">
		select
		
			userId,
			userPwd,
			userName,
			userPhoneNumber,
			userEmail,
			userJoinDate,
			userVerify,
			userBirth
	
		from MemberDTO
		
		<if test="searchType.equals('userId')">
			where userId like concat('%', #{keyword}, '%')
		</if>
		<if test="searchType.equals('userName')">
			where userName like concat('%', #{keyword}, '%')
		</if>
		<if test="searchType.equals('userVerify')">
			where userVerify like concat('%', #{keyword}, '%')
		</if>
		
		order by userVerify desc
		limit #{displayTotalContent} , #{pageContent}
		
	</select>
	
	<!-- 검색된 결과에 일치하는 회원수 -->
	<select id="searchMember" resultType="Int" parameterType="hashmap">
		
		select count(*)
			from MemberDTO
		
		<if test="searchType.equals('userId')">
			where userId like concat('%', #{keyword}, '%')
		</if>
		<if test="searchType.equals('userName')">
			where userName like concat('%', #{keyword}, '%')
		</if>
		<if test="searchType.equals('userVerify')">
			where userVerify like concat('%', #{keyword}, '%')
		</if>
		
	</select>
	
</mapper>