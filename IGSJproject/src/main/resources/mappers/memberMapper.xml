<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappers.memberMapper">

	<!-- 회원가입(회원정보) -->
	<insert id="signUpMember" parameterType="ezen.project.IGSJ.member.domain.MemberDTO">

		INSERT INTO MemberDTO (userId, userPwd, userName, userPhoneNumber, userJoinDate, userEmail, userBirth)
		VALUES(#{userId}, #{userPwd}, #{userName}, #{userPhoneNumber}, NOW(), #{userEmail}, #{userBirth})
	</insert>

	<!-- 로그인 기능 -->
	<select id="memberLogin" parameterType="ezen.project.IGSJ.member.domain.MemberDTO" resultType="ezen.project.IGSJ.member.domain.MemberDTO">
		SELECT *
		FROM MemberDTO
		WHERE userId = #{userId} AND userPwd = #{userPwd}
	</select>

	<!-- 회원가입 아이디 중복 체크 -->
	<select id="memberIdCheck" resultType="int" parameterType="String">

		SELECT COUNT(*)
		FROM MemberDTO
		WHERE userId = #{userId}

	</select>

	<!-- 회원 정보 수정 로직 -->
	<update id="memberModify" parameterType="ezen.project.IGSJ.member.domain.MemberDTO">

		UPDATE MemberDTO
		SET
		userPwd = #{userPwd},
		userName = #{userName},
		userPhoneNumber = #{userPhoneNumber},
		userEmail = #{userEmail},
		userBirth = #{userBirth}
		WHERE userId = #{userId}
		<!-- userPwd = #{userPwd}, -->
	</update>

	<!-- 회원 정보 찾기 -->
	<select id="memberProfile" parameterType="String" resultType="ezen.project.IGSJ.member.domain.MemberDTO">

		SELECT userId, userPwd, userName, userPhoneNumber, userEmail, userBirth
		FROM MemberDTO
		WHERE userId = #{userId}

	</select>

	<!-- 회원 탈퇴 -->
	<delete id="removeMember" parameterType="ezen.project.IGSJ.member.domain.MemberDTO">

		DELETE FROM MemberDTO
		WHERE userId = #{userId}
		AND userPwd = #{userPwd}

	</delete>


</mapper>